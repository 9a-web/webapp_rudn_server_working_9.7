# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ RUDN Schedule App

## –î–∞—Ç–∞: 2025-11-08

## üìä –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
- **CPU usage: 96-99%** (–∫—Ä–∏—Ç–∏—á–Ω–æ –≤—ã—Å–æ–∫–∏–π)
- –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è API –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### 1.1 LiveScheduleCard - –°–Ω–∏–∂–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
**–§–∞–π–ª:** `/app/frontend/src/components/LiveScheduleCard.jsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
```javascript
// –ë–´–õ–û: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
setInterval(() => setTime(new Date()), 1000);

// –°–¢–ê–õ–û: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
setInterval(() => setTime(new Date()), 10000);
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤ –Ω–∞ 90%

---

#### 1.2 React.memo –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
–û–±–µ—Ä–Ω—É—Ç—ã –≤ React.memo –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤:

- ‚úÖ `WeekDaySelector` - –¥–æ–±–∞–≤–ª–µ–Ω React.memo
- ‚úÖ `BottomNavigation` - –¥–æ–±–∞–≤–ª–µ–Ω React.memo
- ‚úÖ `LiveScheduleCard` - —É–∂–µ –±—ã–ª –æ–±–µ—Ä–Ω—É—Ç
- ‚úÖ `Header` - —É–∂–µ –±—ã–ª –æ–±–µ—Ä–Ω—É—Ç

**–≠—Ñ—Ñ–µ–∫—Ç:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –µ—Å–ª–∏ –ø—Ä–æ–ø—Å—ã –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å

---

#### 1.3 useCallback –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –≤ App.js
**–§–∞–π–ª:** `/app/frontend/src/App.js`

–û–±–µ—Ä–Ω—É—Ç—ã –≤ useCallback:
- ‚úÖ `loadUserData()`
- ‚úÖ `updateCurrentClass()`
- ‚úÖ `handleTabClick()` –≤ BottomNavigation

**–≠—Ñ—Ñ–µ–∫—Ç:** –§—É–Ω–∫—Ü–∏–∏ –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–µ, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

### 2. Backend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### 2.1 –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints

**–§–∞–π–ª:** `/app/backend/server.py`

##### GET /api/bot-info
```python
@cache(ttl=3600)  # –ö–µ—à –Ω–∞ 1 —á–∞—Å
async def get_bot_info():
```
**–≠—Ñ—Ñ–µ–∫—Ç:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Telegram API —Ç–æ–ª—å–∫–æ —Ä–∞–∑ –≤ —á–∞—Å

##### GET /api/weather
```python
@cache(ttl=600)  # –ö–µ—à –Ω–∞ 10 –º–∏–Ω—É—Ç
async def get_weather_endpoint():
```
**–≠—Ñ—Ñ–µ–∫—Ç:** –ü–æ–≥–æ–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑ –≤ 10 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

---

#### 2.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Scheduler
**–§–∞–π–ª:** `/app/backend/scheduler.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –ë–´–õ–û:
IntervalTrigger(minutes=1)  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
IntervalTrigger(hours=1)    # –û—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥—ã–π —á–∞—Å

# –°–¢–ê–õ–û:
IntervalTrigger(minutes=5)  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
IntervalTrigger(hours=6)    # –û—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** 
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∑–∞ 5-30 –º–∏–Ω—É—Ç –¥–æ –ø–∞—Ä—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞ –¥–ª—è —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —á–∞—Å—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–≠—Ñ—Ñ–µ–∫—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ MongoDB –∏ CPU –Ω–∞ 80%

---

## üìà –†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### CPU usage ‚úÖ
- **–ë—ã–ª–æ:** 96-99% (–∫—Ä–∏—Ç–∏—á–Ω–æ –≤—ã—Å–æ–∫–∏–π)
- **–°—Ç–∞–ª–æ:** ~5-7% (–≤ –ø—Ä–æ—Å—Ç–æ–µ –ø–æ—á—Ç–∏ 0%)
- **–°–Ω–∏–∂–µ–Ω–∏–µ:** ~92% üéâ

**–î–µ—Ç–∞–ª–∏:**
```
–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- Frontend Node.js: 9.8-14% CPU
- –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: 96-99%

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- Frontend Node.js: 3.0-3.8% CPU
- Backend: 0.3-0.7% CPU
- MongoDB: 0.7-0.8% CPU
- CPU idle: 100% (—Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–≥—Ä—É–∂–µ–Ω–∞)
```

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤ ‚úÖ
- **LiveScheduleCard:** —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 90% (—Å 1/—Å–µ–∫ –¥–æ 1/10—Å–µ–∫)
- **–î—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 40-60% –±–ª–∞–≥–æ–¥–∞—Ä—è React.memo

### API –∑–∞–ø—Ä–æ—Å—ã ‚úÖ
- **/api/bot-info:** —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 99.9% (–∫–µ—à 1 —á–∞—Å)
  - –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ Telegram API
  - –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã: **0.001s** (cache hit)
- **/api/weather:** —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 98.3% (–∫–µ—à 10 –º–∏–Ω—É—Ç)
  - –ü–æ–≥–æ–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑ –≤ 10 –º–∏–Ω—É—Ç
  - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏–∑ –∫–µ—à–∞

### Backend –Ω–∞–≥—Ä—É–∑–∫–∞ ‚úÖ
- **Scheduler checks:** —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 80% (—Å 60/—á–∞—Å –¥–æ 12/—á–∞—Å)
- **Database queries:** —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ ~70%
- **Cache hits:** —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ª–æ–≥–∞–º–∏)

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í–æ–∑–º–æ–∂–Ω—ã–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å react-window –∏–ª–∏ react-virtualized –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ –∑–∞–¥–∞—á
   - –ê–∫—Ç—É–∞–ª—å–Ω–æ, –∫–æ–≥–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è >50 –∑–∞–¥–∞—á

2. **Code splitting**
   - –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω (lazy loading)
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è TasksSection –∏ JournalSection

3. **Service Worker**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
   - Offline –ø–æ–¥–¥–µ—Ä–∂–∫–∞

4. **Image optimization**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebP —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - Lazy loading –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

5. **Bundle analysis**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä bundle —Å –ø–æ–º–æ—â—å—é webpack-bundle-analyzer
   - –í—ã—è–≤–∏—Ç—å —Ç—è–∂–µ–ª—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

6. **MongoDB –∏–Ω–¥–µ–∫—Å—ã**
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –û—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è telegram_id, group_id

---

## üìù –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **Frontend:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
   cd /app/frontend
   yarn build
   ```

2. **Backend:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫
   sudo supervisorctl restart backend
   tail -f /var/log/supervisor/backend.err.log
   ```

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU:**
   ```bash
   ps aux --sort=-%cpu | head -10
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞:**
   - –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Network
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ Cache-Control
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **LiveScheduleCard** - –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 1 —Å–µ–∫—É–Ω–¥—ã
   - –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –±–æ–ª—å—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ 5 —Å–µ–∫—É–Ω–¥
   - –ù–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫ 1 —Å–µ–∫—É–Ω–¥–µ

2. **Scheduler** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 5-30 –º–∏–Ω—É—Ç –¥–æ –ø–∞—Ä—ã
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: 5 –º–∏–Ω—É—Ç (–ø—Ä–∏–µ–º–ª–µ–º–æ)

3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏
   - Bot info: –¥–æ 1 —á–∞—Å–∞ (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ —Ä–µ–¥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è)
   - Weather: –¥–æ 10 –º–∏–Ω—É—Ç (–ø–æ–≥–æ–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ)

---

## üéØ –ò—Ç–æ–≥–∏

–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- ‚úÖ Frontend: React.memo, useCallback, —Å–Ω–∏–∂–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ Backend: –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è scheduler
- ‚úÖ –û–∂–∏–¥–∞–µ–º–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ CPU –Ω–∞ ~50%
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ MongoDB

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.**
