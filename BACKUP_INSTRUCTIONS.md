# üì¶ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –±—ç–∫–∞–ø—É MongoDB –¥–ª—è rudn_schedule

## üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. –ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
./backup_mongodb.sh
```
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–æ–∑–¥–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–π –±—ç–∫–∞–ø —á–µ—Ä–µ–∑ `mongodump` (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç (—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç)
- –£–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –≤—Å–µ –≤ tar.gz –∞—Ä—Ö–∏–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `/app/backups/rudn_schedule_backup_YYYYMMDD_HHMMSS.tar.gz` - –∞—Ä—Ö–∏–≤
- `/app/backups/rudn_schedule_backup_YYYYMMDD_HHMMSS_binary/` - –±–∏–Ω–∞—Ä–Ω—ã–π –±—ç–∫–∞–ø
- `/app/backups/rudn_schedule_backup_YYYYMMDD_HHMMSS_json/` - JSON —Ñ–∞–π–ª—ã

---

### 2. –ë—ã—Å—Ç—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç –≤ JSON
```bash
./export_json.sh
```
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ë—ã—Å—Ç—Ä–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ JSON
- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `/app/exports/export_YYYYMMDD_HHMMSS/*.json` - JSON —Ñ–∞–π–ª—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π

---

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
```bash
./restore_mongodb.sh /path/to/backup_folder
```
**–ü—Ä–∏–º–µ—Ä:**
```bash
./restore_mongodb.sh /app/backups/rudn_schedule_backup_20250122_150000_binary/rudn_schedule
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —Ç–µ–∫—É—â—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö!

---

## üì• –ö–∞–∫ —Å–∫–∞—á–∞—Ç—å –±—ç–∫–∞–ø –Ω–∞ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ base64 (–¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –±–∞–∑)
```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
./backup_mongodb.sh

# –ù–∞–π—Ç–∏ –∞—Ä—Ö–∏–≤
ls -la /app/backups/*.tar.gz

# –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –≤ base64 –∏ –≤—ã–≤–µ—Å—Ç–∏
cat /app/backups/rudn_schedule_backup_20250122_150000.tar.gz | base64
```

**–ù–∞ —Å–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:**
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥ base64
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª `backup.txt`
3. –î–µ–∫–æ–¥–∏—Ä—É–π—Ç–µ:
```bash
# Linux/Mac
cat backup.txt | base64 -d > rudn_schedule_backup.tar.gz

# Windows (PowerShell)
[System.Convert]::FromBase64String((Get-Content backup.txt)) | Set-Content rudn_schedule_backup.tar.gz -Encoding Byte
```

### –°–ø–æ—Å–æ–± 2: –°–æ–∑–¥–∞—Ç—å API endpoint (–±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ)
–Ø –º–æ–≥—É –¥–æ–±–∞–≤–∏—Ç—å –≤ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ endpoint `/api/backup/download`, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –±—ç–∫–∞–ø –ø—Ä—è–º–æ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.

---

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
mongosh mongodb://localhost:27017/rudn_schedule --eval "db.stats()"
```

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π
```bash
mongosh mongodb://localhost:27017/rudn_schedule --eval "db.getCollectionNames()"
```

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
```bash
mongosh mongodb://localhost:27017/rudn_schedule --eval "db.user_settings.countDocuments()"
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
```bash
mongosh mongodb://localhost:27017/rudn_schedule --eval "db.user_settings.findOne()"
```

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—ç–∫–∞–ø–æ–≤
```bash
ls -lh /app/backups/
```

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
```bash
ls -lh /app/exports/
```

---

## üìä –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –±–∞–∑–µ rudn_schedule

1. **user_settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≥—Ä—É–ø–ø–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥)
2. **user_stats** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **user_achievements** - –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
4. **tasks** - –ª–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **rooms** - –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã
6. **room_participants** - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–Ω–∞—Ç
7. **group_tasks** - –≥—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
./backup_mongodb.sh

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
ls -lh /app/backups/

# 3. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
./restore_mongodb.sh /app/backups/–ù–ê–ó–í–ê–ù–ò–ï_–ë–≠–ö–ê–ü–ê_binary/rudn_schedule
```

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "command not found"
```bash
chmod +x backup_mongodb.sh export_json.sh restore_mongodb.sh
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å. –ë—ç–∫–∞–ø –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.

### –ù–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /app/backups
–°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç –Ω—É–∂–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã:** –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. **–•—Ä–∞–Ω–µ–Ω–∏–µ:** –°–∫–∞—á–∏–≤–∞–π—Ç–µ –≤–∞–∂–Ω—ã–µ –±—ç–∫–∞–ø—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤

---

**–°–æ–∑–¥–∞–Ω–æ:** Emergent AI Agent  
**–î–∞—Ç–∞:** 2025-01-22
